<!DOCTYPE html>
<html>

<head>
    <title>EA Server - Register</title>
    <style>
        tbody {
            text-align: center;
        }
    </style>
</head>

<body background="/bg.gif">
    <center>
        <table width="95%">
            <tbody>
                <tr bgcolor="#204020">
                    <td height="20">
                        <font color="white">
                            Welcome!
                        </font>
                    </td>
                </tr>
            </tbody>
        </table>

        <table width="40%" style="border: solid;margin-top:50px;">
            <tbody>
                <tr>
                    <td height="20">
                        Register
                    </td>
                </tr>
                <tr>
                    <td height="20">
                        E-Mail:<input id="email" type="text">
                    </td>
                </tr>
                <tr>
                    <td height="20">
                        Password:<input id="password" type="password">
                    </td>
                </tr>
                <tr>
                    <td height="20">
                        <button id="login_btn" onclick="register()">Register</button>
                    </td>
                </tr>
            </tbody>
        </table>

    </center>

    <script>
        function register(){
            var http = new XMLHttpRequest();
            var url = "/api/user/register";
            let email = document.getElementById("email").value;
            let password = document.getElementById("password").value;
            http.withCredentials = true;
            http.onreadystatechange = function() {
                if(http.readyState == XMLHttpRequest.DONE){
                    let resp = JSON.parse(http.responseText);
                    if(http.status==200){
                        alert(resp.data.message);
                        location.href = "/";
                    }else{
                        alert(resp.data.message);
                    }
                    
                }
            }
            http.open("POST",url);
            http.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            http.send(JSON.stringify({"email":email,"password":password}));
        }
    </script>
</body>

</html>